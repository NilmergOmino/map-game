!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n(1);var o=n(2);window.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("btn_start"),e=document.getElementById("btn_win-board"),n=document.getElementById("btn_close"),s=document.getElementById("btn_back");document.getElementById("select-map").addEventListener("change",i.setMap),i.setMap(),t.addEventListener("click",function(){a.toggleView(),a.startGame()}),e.addEventListener("click",o.winBoard.showAllResults),n.addEventListener("click",o.winBoard.hide),s.addEventListener("click",a.startView),o.winBoard.btnResetResults.addEventListener("click",o.winBoard.resetResults)});var a={header:document.getElementById("header"),startPanel:document.getElementById("start-panel"),gameContainer:document.getElementById("game-container"),startGame:function(){i.init()},restartGame:function(){i.stopAndClean(),o.winBoard.hide(),i.init()},startView:function(){i.stopAndClean(),o.winBoard.hide(),a.toggleView()},toggleView:function(){a.header.classList.toggle("hidden"),a.startPanel.classList.toggle("hidden"),a.gameContainer.classList.toggle("hidden")}},i={timeContainer:document.getElementById("time"),pointsContainer:document.getElementById("points"),gameCountry:document.getElementById("game-country"),selectMap:document.getElementById("select-map"),mapContainer:document.getElementById("game-map-container"),init:function(){i.status=!0,i.mapContainer.innerHTML=i.mapSVG;var t=i.mapContainer.querySelector("svg");t.id=i.map,t.classList.add(i.map,"game-map"),i.stopCounting=!1,i.letClick=!0,i.points=0,i.pointsContainer.textContent=i.points,i.time=100,i.setMapItems(),i.setCountries(),i.mapItems.forEach(function(t){return t.addEventListener("click",i.checkAnswer)})},setMap:function(){i.map=i.selectMap.value;var t="js/maps-info/"+i.map+".json",e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){200===this.status?(i.mapObject=JSON.parse(e.responseText),i.loadMap()):alert("Błąd połączenia! Prosimy spróbować później.")}),e.send()},loadMap:function(){var t="img/maps/"+i.map+".svg",e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){200===this.status?i.mapSVG=e.responseText:alert("Błąd połączenia! Prosimy spróbować później.")}),e.send()},stopAndClean:function(){i.mapContainer.innerHTML="",i.stopCounting=!0,i.letClick=!1,i.status=!1},setMapItems:function(){var t="#"+i.map+" .map-item";i.mapItems=document.querySelectorAll(t)},setCountries:function(){for(var t in i.countriesArr=[],i.mapObject)i.mapObject.hasOwnProperty(t)&&i.countriesArr.push(t);i.maxPoints=2*i.countriesArr.length,i.startRound()},setTime:function(){i.time=100},setCountry:function(){var t=Math.round(Math.random()*(i.countriesArr.length-1));i.currentCountry=i.countriesArr[t],i.gameCountry.classList.remove("game-country_correct"),i.gameCountry.classList.remove("game-country_wrong"),i.gameCountry.textContent=i.mapObject[i.currentCountry]},removeCountry:function(t){var e=i.countriesArr.indexOf(t);i.countriesArr.splice(e,1)},counting:function(){if(i.time>=50?(i.timeContainer.classList.add("time_good"),i.timeContainer.classList.remove("time_enough")):i.time<50&&i.time>0?(i.timeContainer.classList.add("time_enough"),i.timeContainer.classList.remove("time_good")):(i.timeContainer.classList.remove("time_good"),i.timeContainer.classList.remove("time_enough")),!i.stopCounting&&i.time>0)i.time-=1,i.timeContainer.textContent=i.time/10%1==0?i.time/10+".0":i.time/10,setTimeout(i.counting,100),0==i.time&&(i.letClick=!1);else if(i.time<=0){i.points--,i.pointsContainer.textContent=i.points,i.stopCounting=!0,i.gameCountry.classList.add("game-country_wrong");var t=window.innerWidth/2-10,e=window.innerHeight/2+pageYOffset-15;i.flyingPoint("-1","minus",t,e),window.setTimeout(i.startRound,700)}},startRound:function(){i.status&&(i.countriesArr.length>0?(i.stopCounting=!1,i.letClick=!0,i.setCountry(),i.stopCounting=!1,i.time=100,i.counting()):i.endGame())},checkAnswer:function(t){if(i.stopCounting=!0,i.letClick){var e=t.clientX-10,n=t.clientY-22+pageYOffset;i.letClick=!1;var o=t.target.id;o==i.currentCountry?(i.time>=50?(i.points+=2,i.flyingPoint("+2","plus-plus",e,n)):(i.points++,i.flyingPoint("+1","plus",e,n)),t.target.removeEventListener("click",i.checkAnswer),t.target.classList.add("map-item_correct"),i.removeCountry(o),i.gameCountry.classList.add("game-country_correct")):(i.points--,t.target.classList.add("map-item_wrong"),i.gameCountry.classList.add("game-country_wrong"),i.flyingPoint("-1","minus",e,n),window.setTimeout(function(){t.target.classList.remove("map-item_wrong")},700)),i.pointsContainer.textContent=i.points,i.stopCounting=!0,window.setTimeout(i.startRound,700)}},endGame:function(){i.stopCounting=!0,i.letClick=!1,i.status=!1,i.gameCountry.textContent="Gratulacje, ukończyłeś grę!",i.pointsContainer.textContent=i.points+" / "+i.maxPoints,o.winBoard.show();var t=o.winBoard.createButton("btn_restart","zagraj ponownie"),e=o.winBoard.createButton("btn_restart","powrót do wyboru mapy");t.addEventListener("click",a.restartGame),e.addEventListener("click",a.startView),o.winBoard.addNewResult(i.map,i.points,i.maxPoints)},flyingPoint:function(t,e,n,o){var a=document.createElement("span");a.textContent=t,a.classList.add("flying-point","flying-point_"+e),a.style.left=n+"px",a.style.top=o+"px",document.body.appendChild(a),window.setTimeout(function(){document.body.removeChild(a)},1500)}}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={board:document.getElementById("win-board"),btnsContainer:document.getElementById("btns-container"),winsContainer:document.getElementById("wins-container"),btnResetResults:document.getElementById("btn_clear-storage"),show:function(){o.board.classList.remove("hidden")},hide:function(){o.board.classList.add("hidden"),o.btnsContainer.innerHTML="",o.winsContainer.innerHTML=""},createButton:function(t,e){var n=document.createElement("button");return n.classList.add(t),n.textContent=e,o.btnsContainer.appendChild(n),n},addNewResult:function(t,e,n){null==localStorage.getItem(t)&&localStorage.setItem(t,JSON.stringify({max:n,arr:[]}));var a=JSON.parse(localStorage.getItem(t));a.arr.push(e),localStorage.setItem(t,JSON.stringify(a)),o.winsContainer.innerHTML="",o.btnResetResults.classList.add("hidden"),o.showResults(t)},showResults:function(t){o.show();var e=document.createElement("div");e.classList.add("map-results"),o.winsContainer.appendChild(e);var n=document.createElement("h2");if(n.classList.add("map-title"),n.textContent=o.translate(t),e.appendChild(n),null!==localStorage.getItem(t)){var a=JSON.parse(localStorage.getItem(t)),i=Math.max.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(a.arr)),s=document.createElement("p");s.classList.add("board__max-points"),e.appendChild(s),s.innerHTML="Maksymalna liczba punktów: "+a.max;var r=document.createElement("p");r.classList.add("best-result"),e.appendChild(r),r.innerHTML='Twój najlepszy wynik: <span class="best-result-value">'+i+"</span>";var c=document.createElement("div");c.classList.add("other-results"),e.appendChild(c),c.innerHTML="<p>Najnowsze wyniki:</p>";var l=document.createElement("ol");l.classList.add("result-list"),c.appendChild(l);var d=document.createDocumentFragment();a.arr.reverse().forEach(function(t,e){if(e<10){var n=document.createElement("li");n.classList.add("result-list-item"),n.textContent=t,d.appendChild(n)}}),l.appendChild(d)}else{var u=document.createElement("p");u.classList.add("no-results-info"),u.textContent="brak wyników",e.appendChild(u)}},resetResults:function(){confirm("Wszystkie Twoje wyniki zostaną usunięte z pamięci, czy na pewno chcesz kontynuować?")&&(localStorage.clear(),o.winsContainer.innerHTML="",o.showAllResults())},showAllResults:function(){o.winsContainer.innerHTML="",o.btnResetResults.classList.remove("hidden"),document.querySelectorAll(".select-map option").forEach(function(t){o.showResults(t.value)})},translate:function(t){var e="wystąpił błąd";return document.querySelectorAll(".select-map option").forEach(function(n){n.value==t&&(e=n.textContent)}),e}};e.winBoard=o}]);
//# sourceMappingURL=bundle.js.map