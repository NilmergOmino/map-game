!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n(1);var o=n(2);window.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("btn_start"),e=document.getElementById("btn_win-board"),n=document.getElementById("btn_close"),r=document.getElementById("btn_back");document.getElementById("select-map").addEventListener("change",a.setMap),a.setMap(),t.addEventListener("click",function(){i.toggleView(),i.startGame()}),e.addEventListener("click",o.winBoard.showAllResults),n.addEventListener("click",o.winBoard.hide),r.addEventListener("click",i.startView),o.winBoard.btnResetResults.addEventListener("click",o.winBoard.resetResults)});var i={header:document.getElementById("header"),startPanel:document.getElementById("start-panel"),gameContainer:document.getElementById("game-container"),startGame:function(){a.init()},restartGame:function(){a.stopAndClean(),o.winBoard.hide(),a.init()},startView:function(){a.stopAndClean(),o.winBoard.hide(),i.toggleView()},toggleView:function(){i.header.classList.toggle("hidden"),i.startPanel.classList.toggle("hidden"),i.gameContainer.classList.toggle("hidden")}},a={timeContainer:document.getElementById("time"),pointsContainer:document.getElementById("points"),gameCountry:document.getElementById("game-country"),selectMap:document.getElementById("select-map"),mapContainer:document.getElementById("game-map-container"),init:function(){a.mapContainer.innerHTML=a.mapSVG;var t=a.mapContainer.querySelector("svg");t.id=a.map,t.classList.add(a.map,"game-map"),a.stopCounting=!1,a.letClick=!0,a.points=0,a.pointsContainer.textContent=a.points,a.time=100,a.setMapItems(),a.setCountries(),a.mapItems.forEach(function(t){return t.addEventListener("click",a.checkAnswer)})},setMap:function(){a.map=a.selectMap.value;var t="js/maps-info/"+a.map+".json",e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){200===this.status?(a.mapObject=JSON.parse(e.responseText),a.loadMap()):alert("Błąd połączenia! Prosimy spróbować później.")}),e.send()},loadMap:function(){var t="img/maps/"+a.map+".svg",e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){200===this.status?a.mapSVG=e.responseText:alert("Błąd połączenia! Prosimy spróbować później.")}),e.send()},stopAndClean:function(){a.mapContainer.innerHTML="",a.stopCounting=!0,a.letClick=!1},setMapItems:function(){var t="#"+a.map+" .map-item";a.mapItems=document.querySelectorAll(t)},setCountries:function(){for(var t in a.countriesArr=[],a.mapObject)a.mapObject.hasOwnProperty(t)&&a.countriesArr.push(t);a.maxPoints=2*a.countriesArr.length,a.startRound()},setTime:function(){a.time=100},setCountry:function(){var t=Math.round(Math.random()*(a.countriesArr.length-1));a.currentCountry=a.countriesArr[t],a.gameCountry.classList.remove("game-country_correct"),a.gameCountry.classList.remove("game-country_wrong"),a.gameCountry.textContent=a.mapObject[a.currentCountry]},removeCountry:function(t){var e=a.countriesArr.indexOf(t);a.countriesArr.splice(e,1)},counting:function(){if(a.time>=50?(a.timeContainer.classList.add("time_good"),a.timeContainer.classList.remove("time_enough")):a.time<50&&a.time>0?(a.timeContainer.classList.add("time_enough"),a.timeContainer.classList.remove("time_good")):(a.timeContainer.classList.remove("time_good"),a.timeContainer.classList.remove("time_enough")),!a.stopCounting&&a.time>0)a.time-=1,a.timeContainer.textContent=a.time/10%1==0?a.time/10+".0":a.time/10,setTimeout(a.counting,100),0==a.time&&(a.letClick=!1);else if(a.time<=0){a.points--,a.pointsContainer.textContent=a.points,a.stopCounting=!0,a.gameCountry.classList.add("game-country_wrong");var t=window.innerWidth/2-10,e=window.innerHeight/2+pageYOffset-15;a.flyingPoint("-1","minus",t,e),window.setTimeout(a.startRound,700)}},startRound:function(){a.countriesArr.length>0?(a.stopCounting=!1,a.letClick=!0,a.setCountry(),a.stopCounting=!1,a.time=100,a.counting()):a.endGame()},checkAnswer:function(t){if(a.stopCounting=!0,a.letClick){o.winBoard.addNewResult(a.map,a.points);var e=t.clientX-10,n=t.clientY-22+pageYOffset;a.letClick=!1;var i=t.target.id;i==a.currentCountry?(a.time>=50?(a.points+=2,a.flyingPoint("+2","plus-plus",e,n)):(a.points++,a.flyingPoint("+1","plus",e,n)),t.target.removeEventListener("click",a.checkAnswer),t.target.classList.add("map-item_correct"),a.removeCountry(i),a.gameCountry.classList.add("game-country_correct")):(a.points--,t.target.classList.add("map-item_wrong"),a.gameCountry.classList.add("game-country_wrong"),a.flyingPoint("-1","minus",e,n),window.setTimeout(function(){t.target.classList.remove("map-item_wrong")},700)),a.pointsContainer.textContent=a.points,a.stopCounting=!0,window.setTimeout(a.startRound,700)}},endGame:function(){a.gameCountry.textContent="Gratulacje, ukończyłeś grę!",a.pointsContainer.textContent=a.points+" / "+a.maxPoints,o.winBoard.show();var t=o.winBoard.createButton("btn_restart","zagraj ponownie"),e=o.winBoard.createButton("btn_restart","powrót do wyboru mapy");t.addEventListener("click",i.restartGame),e.addEventListener("click",i.startView),o.winBoard.addNewResult(a.map,a.points)},flyingPoint:function(t,e,n,o){var i=document.createElement("span");i.textContent=t,i.classList.add("flying-point","flying-point_"+e),i.style.left=n+"px",i.style.top=o+"px",document.body.appendChild(i),window.setTimeout(function(){document.body.removeChild(i)},1500)}}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={board:document.getElementById("win-board"),btnsContainer:document.getElementById("btns-container"),winsContainer:document.getElementById("wins-container"),btnResetResults:document.getElementById("btn_clear-storage"),show:function(){o.board.classList.remove("hidden")},hide:function(){o.board.classList.add("hidden"),o.btnsContainer.innerHTML="",o.winsContainer.innerHTML=""},createButton:function(t,e){var n=document.createElement("button");return n.classList.add(t),n.textContent=e,o.btnsContainer.appendChild(n),n},addNewResult:function(t,e){null==localStorage.getItem(t)&&localStorage.setItem(t,JSON.stringify([]));var n=JSON.parse(localStorage.getItem(t));n.push(e),localStorage.setItem(t,JSON.stringify(n)),o.winsContainer.innerHTML="",o.btnResetResults.classList.add("hidden"),o.showResults(t)},showResults:function(t){o.show();var e=document.createElement("div");e.classList.add("map-results"),o.winsContainer.appendChild(e);var n=document.createElement("h2");if(n.classList.add("map-title"),n.textContent=o.translate(t),e.appendChild(n),null!==localStorage.getItem(t)){var i=JSON.parse(localStorage.getItem(t)),a=Math.max.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(i)),r=document.createElement("p");r.classList.add("best-result"),e.appendChild(r),r.innerHTML='Najlepszy wynik: <span class="best-result-value">'+a+"</span>";var s=document.createElement("div");s.classList.add("other-results"),e.appendChild(s),s.innerHTML="<p>Najnowsze:</p>";var c=document.createElement("ol");c.classList.add("result-list"),s.appendChild(c);var d=document.createDocumentFragment();i.reverse().forEach(function(t){var e=document.createElement("li");e.classList.add("result-list-item"),e.textContent=t,d.appendChild(e)}),c.appendChild(d)}else{var l=document.createElement("p");l.classList.add("no-results-info"),l.textContent="brak wyników",e.appendChild(l)}},resetResults:function(){confirm("Wszystkie Twoje wyniki zostaną usunięte z pamięci, czy na pewno chcesz kontynuować?")&&(localStorage.clear(),o.winsContainer.innerHTML="",o.showAllResults())},showAllResults:function(){o.winsContainer.innerHTML="",o.btnResetResults.classList.remove("hidden"),document.querySelectorAll(".select-map option").forEach(function(t){o.showResults(t.value)})},translate:function(t){var e="wystąpił błąd";return document.querySelectorAll(".select-map option").forEach(function(n){n.value==t&&(e=n.textContent)}),e}};e.winBoard=o}]);
//# sourceMappingURL=bundle.js.map