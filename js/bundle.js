!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n(1);var o=n(2);window.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("btn_start"),e=document.getElementById("btn_win-board"),n=document.getElementById("btn_close"),a=document.getElementById("btn_back");document.getElementById("select-map").addEventListener("change",r.setMap),r.setMap(),t.addEventListener("click",function(){i.toggleView(),i.startGame()}),e.addEventListener("click",o.winBoard.show),n.addEventListener("click",o.winBoard.hide),a.addEventListener("click",i.startView)});var i={header:document.getElementById("header"),startPanel:document.getElementById("start-panel"),gameContainer:document.getElementById("game-container"),startGame:function(){r.init()},restartGame:function(){r.stopAndClean(),o.winBoard.hide(),r.init()},startView:function(){r.stopAndClean(),o.winBoard.hide(),i.toggleView()},toggleView:function(){i.header.classList.toggle("hidden"),i.startPanel.classList.toggle("hidden"),i.gameContainer.classList.toggle("hidden")}},r={timeContainer:document.getElementById("time"),pointsContainer:document.getElementById("points"),gameCountry:document.getElementById("game-country"),selectMap:document.getElementById("select-map"),mapContainer:document.getElementById("game-map-container"),init:function(){r.mapContainer.innerHTML=r.mapSVG;var t=r.mapContainer.querySelector("svg");t.id=r.map,t.classList.add(r.map,"game-map"),r.stopCounting=!1,r.letClick=!0,r.points=0,r.pointsContainer.textContent=r.points,r.time=100,r.setMapItems(),r.setCountries(),r.mapItems.forEach(function(t){return t.addEventListener("click",r.checkAnswer)})},setMap:function(){r.map=r.selectMap.value;var t="js/maps-info/"+r.map+".json",e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){200===this.status?(r.mapObject=JSON.parse(e.responseText),r.loadMap()):alert("Błąd połączenia! Prosimy spróbować później.")}),e.send()},loadMap:function(){var t="img/maps/"+r.map+".svg",e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){200===this.status?r.mapSVG=e.responseText:alert("Błąd połączenia! Prosimy spróbować później.")}),e.send()},stopAndClean:function(){r.mapContainer.innerHTML="",r.stopCounting=!0,r.letClick=!1},setMapItems:function(){var t="#"+r.map+" .map-item";r.mapItems=document.querySelectorAll(t)},setCountries:function(){for(var t in r.countriesArr=[],r.mapObject)r.mapObject.hasOwnProperty(t)&&r.countriesArr.push(t);r.maxPoints=2*r.countriesArr.length,r.startRound()},setTime:function(){r.time=100},setCountry:function(){var t=Math.round(Math.random()*(r.countriesArr.length-1));r.currentCountry=r.countriesArr[t],r.gameCountry.classList.remove("game-country_correct"),r.gameCountry.classList.remove("game-country_wrong"),r.gameCountry.textContent=r.mapObject[r.currentCountry]},removeCountry:function(t){var e=r.countriesArr.indexOf(t);r.countriesArr.splice(e,1)},counting:function(){if(r.time>=50?(r.timeContainer.classList.add("time_good"),r.timeContainer.classList.remove("time_enough")):r.time<50&&r.time>0?(r.timeContainer.classList.add("time_enough"),r.timeContainer.classList.remove("time_good")):(r.timeContainer.classList.remove("time_good"),r.timeContainer.classList.remove("time_enough")),!r.stopCounting&&r.time>0)r.time-=1,r.timeContainer.textContent=r.time/10%1==0?r.time/10+".0":r.time/10,setTimeout(r.counting,100),0==r.time&&(r.letClick=!1);else if(r.time<=0){r.points--,r.pointsContainer.textContent=r.points,r.stopCounting=!0,r.gameCountry.classList.add("game-country_wrong");var t=window.innerWidth/2-10,e=window.innerHeight/2+pageYOffset-15;r.flyingPoint("-1","minus",t,e),window.setTimeout(r.startRound,700)}},startRound:function(){r.countriesArr.length>0?(r.stopCounting=!1,r.letClick=!0,r.setCountry(),r.stopCounting=!1,r.time=100,r.counting()):r.endGame()},checkAnswer:function(t){if(r.stopCounting=!0,r.letClick){var e=t.clientX-10,n=t.clientY-22+pageYOffset;r.letClick=!1;var o=t.target.id;o==r.currentCountry?(r.time>=50?(r.points+=2,r.flyingPoint("+2","plus-plus",e,n)):(r.points++,r.flyingPoint("+1","plus",e,n)),t.target.removeEventListener("click",r.checkAnswer),t.target.classList.add("map-item_correct"),r.removeCountry(o),r.gameCountry.classList.add("game-country_correct")):(r.points--,t.target.classList.add("map-item_wrong"),r.gameCountry.classList.add("game-country_wrong"),r.flyingPoint("-1","minus",e,n),window.setTimeout(function(){t.target.classList.remove("map-item_wrong")},700)),r.pointsContainer.textContent=r.points,r.stopCounting=!0,window.setTimeout(r.startRound,700)}},endGame:function(){r.gameCountry.textContent="Gratulacje, ukończyłeś grę!",r.pointsContainer.textContent=r.points+" / "+r.maxPoints,o.winBoard.show();var t=o.winBoard.createButton("btn_restart","zagraj ponownie"),e=o.winBoard.createButton("btn_restart","powrót do wyboru mapy");t.addEventListener("click",i.restartGame),e.addEventListener("click",i.startView)},flyingPoint:function(t,e,n,o){var i=document.createElement("span");i.textContent=t,i.classList.add("flying-point","flying-point_"+e),i.style.left=n+"px",i.style.top=o+"px",document.body.appendChild(i),window.setTimeout(function(){document.body.removeChild(i)},1500)}}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={board:document.getElementById("win-board"),btnsContainer:document.getElementById("btns-container"),winsContainer:document.getElementById("wins-container"),show:function(){o.board.classList.remove("hidden")},hide:function(){o.board.classList.add("hidden"),o.btnsContainer.innerHTML=""},createButton:function(t,e){var n=document.createElement("button");return n.classList.add(t),n.textContent=e,o.btnsContainer.appendChild(n),n},addNewResult:function(){},showResults:function(){}};e.winBoard=o}]);
//# sourceMappingURL=bundle.js.map